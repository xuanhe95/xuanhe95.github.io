<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>Category: Hard - XANDER&#039;s Studio</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="XANDER&#039;s Studio"><meta name="msapplication-TileImage" content="/img/x.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="XANDER&#039;s Studio"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Stay Foolish, Stay Hungery..."><meta property="og:type" content="website"><meta property="og:title" content="XANDER&#039;s Studio"><meta property="og:url" content="https://xuanhe95.github.io/"><meta property="og:site_name" content="XANDER&#039;s Studio"><meta property="og:description" content="Stay Foolish, Stay Hungery..."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://xuanhe95.github.io/img/og_image.png"><meta property="article:author" content="Xuanhe"><meta property="article:tag" content="studio, blog"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://xuanhe95.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://xuanhe95.github.io"},"headline":"XANDER's Studio","image":["https://xuanhe95.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Xuanhe"},"publisher":{"@type":"Organization","name":"XANDER's Studio","logo":{"@type":"ImageObject","url":"https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/icons/x.png"}},"description":"Stay Foolish, Stay Hungery..."}</script><link rel="icon" href="/img/x.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/monokai-sublime.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/icons/x.png" alt="XANDER&#039;s Studio" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/portfolio.html">Portfolio</a><a class="navbar-item" href="/tags/Works/">Works</a><a class="navbar-item" href="/about.html">About Me</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-sun" id="night-icon"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/xuanhe95"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">Categories</a></li><li><a href="/categories/LeetCode/">LeetCode</a></li><li class="is-active"><a href="#" aria-current="page">Hard</a></li></ul></nav></div></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/09/18/42-Trapping-Rain-Water/"><img class="fill" src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/banner/LeetCode.png" alt="42. Trapping Rain Water"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-09-18T08:17:09.000Z" title="9/18/2022, 1:17:09 AM">2022-09-18</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-09-18T08:19:36.000Z" title="9/18/2022, 1:19:36 AM">2022-09-18</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a></span><span class="level-item">2 minutes read (About 252 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/09/18/42-Trapping-Rain-Water/">42. Trapping Rain Water</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><p>Given <code>n</code> non-negative integers representing an elevation map where the width of each bar is <code>1</code>, compute how much water it can trap after raining.</p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>双指针，设置当前左侧的最大高度left和右侧的最大高度right。</p>
<p>分别从两侧遍历height[]数组，当出现更高的height时更新left和right。<br>否则记录left和right与height[i]的差值，并记录在数组waterLeft[]和waterRight[]中。</p>
<p>遍历两个数组，添加两者中的最小值到volume。</p>
<p>*由于单个参数只记录了一侧的最大值，因此最大值另一侧的水的体积会被多计算，因此分别从两侧遍历来获得最小值。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">trap</span><span class="params">(<span class="type">int</span>[] height)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> height.length, left = <span class="number">0</span>, right = <span class="number">0</span>, volume = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] waterLeft = <span class="keyword">new</span> <span class="title class_">int</span>[n], waterRight = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(left &lt;= height[i]) left = height[i];</span><br><span class="line">            <span class="keyword">else</span> waterLeft[i] = left - height[i];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(right &lt;= height[i]) right = height[i];</span><br><span class="line">            <span class="keyword">else</span> waterRight[i] = right - height[i];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            volume += Math.min(waterLeft[i], waterRight[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> volume;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/09/11/1383-Maximum-Performance-of-a-Team/"><img class="fill" src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/banner/LeetCode.png" alt="1383. Maximum Performance of a Team"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-09-11T20:40:33.000Z" title="9/11/2022, 1:40:33 PM">2022-09-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-09-11T20:40:52.000Z" title="9/11/2022, 1:40:52 PM">2022-09-11</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/%E5%A4%8D%E4%B9%A0/">复习</a></span><span class="level-item">2 minutes read (About 349 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/09/11/1383-Maximum-Performance-of-a-Team/">1383. Maximum Performance of a Team</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>You are given two integers <code>n</code> and <code>k</code> and two integer arrays <code>speed</code> and <code>efficiency</code> both of length <code>n</code>. There are <code>n</code> engineers numbered from <code>1</code> to <code>n</code>. <code>speed[i]</code> and <code>efficiency[i]</code> represent the speed and efficiency of the <code>i&lt;sup&gt;th&lt;/sup&gt;</code> engineer respectively.</p>
<p>Choose <strong>at most</strong> <code>k</code> different engineers out of the <code>n</code> engineers to form a team with the maximum <strong>performance</strong>.</p>
<p>The performance of a team is the sum of their engineers’ speeds multiplied by the minimum efficiency among their engineers.</p>
<p>Return <em>the maximum performance of this team</em>. Since the answer can be a huge number, return it <strong>modulo</strong> <code>10&lt;sup&gt;9&lt;/sup&gt;&lt;span&gt; &lt;/span&gt;+ 7</code>.</p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>排序，将所有工程师根据其效率降序排列。</p>
<p>此时遍历时后一个工程师的效率一定小于等于前一个工程师。</p>
<p>因此，此时遍历到每一个工程师，其前面所有的工程师的efficiency均大于等于其本身。<br>维护一个所有选取工程师的总速度ttSpd，每次计算并更新max的值。<br>用最小堆来维护选取的工程师速度，如果优先级队列的尺寸超过k-1，则poll掉队列内最低的速度。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxPerformance</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span>[] speed, <span class="type">int</span>[] efficiency, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">mod</span> <span class="operator">=</span> (<span class="type">int</span>) Math.pow(<span class="number">10</span>, <span class="number">9</span>) + <span class="number">7</span>;</span><br><span class="line">        <span class="type">int</span>[][] engineer = <span class="keyword">new</span> <span class="title class_">int</span>[n][<span class="number">2</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            engineer[i][<span class="number">0</span>] = speed[i];</span><br><span class="line">            engineer[i][<span class="number">1</span>] = efficiency[i];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        Arrays.sort(engineer, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;<span class="type">int</span>[]&gt;()&#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span>[] b)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> b[<span class="number">1</span>] - a[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="type">long</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>, ttSpd = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        PriorityQueue&lt;Integer&gt; pq = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> engineer[i][<span class="number">0</span>], e = engineer[i][<span class="number">1</span>];</span><br><span class="line">            ttSpd += s;</span><br><span class="line">            max = Math.max(max, ttSpd * e);</span><br><span class="line">            pq.add(s);</span><br><span class="line">            <span class="keyword">if</span>(pq.size() == k) ttSpd -= pq.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (max % mod);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/08/27/363-Max-Sum-of-Rectangle-No-Larger-Than-K/"><img class="fill" src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/banner/LeetCode.png" alt="363. Max Sum of Rectangle No Larger Than K"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-08-27T09:17:36.000Z" title="8/27/2022, 2:17:36 AM">2022-08-27</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-08-27T09:17:56.000Z" title="8/27/2022, 2:17:56 AM">2022-08-27</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/%E5%A4%8D%E4%B9%A0/">复习</a></span><span class="level-item">2 minutes read (About 231 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/08/27/363-Max-Sum-of-Rectangle-No-Larger-Than-K/">363. Max Sum of Rectangle No Larger Than K</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>Given an <code>m x n</code> matrix <code>matrix</code> and an integer <code>k</code>, return <em>the max sum of a rectangle in the matrix such that its sum is no larger than</em> <code>k</code>.</p>
<p>It is <strong>guaranteed</strong> that there will be a rectangle with a sum no larger than <code>k</code>.</p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>前缀和，计算矩阵中每个位置对应的方形的和。<br>遍历方形的两个对角线上的点。<br>其面积等于大块加小块的面积减去两个长方形的面积。<br>如果面积有小于k的，则记录其最大值并返回。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSumSubmatrix</span><span class="params">(<span class="type">int</span>[][] matrix, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> matrix.length, y = matrix[<span class="number">0</span>].length, max = Integer.MIN_VALUE;</span><br><span class="line">        <span class="type">int</span>[][] sum = <span class="keyword">new</span> <span class="title class_">int</span>[x+<span class="number">1</span>][y+<span class="number">1</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= x; i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= y; j++)&#123;</span><br><span class="line">                total += matrix[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">                sum[i][j] = sum[i-<span class="number">1</span>][j] + total;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= x; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= y; j++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> i + <span class="number">1</span>; m &lt;= x; m++)&#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> j + <span class="number">1</span>; n &lt;= y; n++)&#123;</span><br><span class="line">                        <span class="type">int</span> <span class="variable">area</span> <span class="operator">=</span> sum[m][n] + sum[i][j] - sum[m][j] - sum[i][n];</span><br><span class="line">                        <span class="keyword">if</span>(area &lt;= k) max = Math.max(max, area);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/08/06/1220-Count-Vowels-Permutation/"><img class="fill" src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/banner/LeetCode.png" alt="1220. Count Vowels Permutation"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-08-07T05:49:26.000Z" title="8/6/2022, 10:49:26 PM">2022-08-06</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-08-07T05:50:02.000Z" title="8/6/2022, 10:50:02 PM">2022-08-06</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a></span><span class="level-item">2 minutes read (About 291 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/08/06/1220-Count-Vowels-Permutation/">1220. Count Vowels Permutation</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>Given an integer <code>n</code>, your task is to count how many strings of length <code>n</code> can be formed under the following rules:</p>
<ul>
<li><p>Each character is a lower case vowel (<code>&#39;a&#39;</code>, <code>&#39;e&#39;</code>, <code>&#39;i&#39;</code>, <code>&#39;o&#39;</code>, <code>&#39;u&#39;</code>)</p>
</li>
<li><p>Each vowel <code>&#39;a&#39;</code> may only be followed by an <code>&#39;e&#39;</code>.</p>
</li>
<li><p>Each vowel <code>&#39;e&#39;</code> may only be followed by an <code>&#39;a&#39;</code> or an <code>&#39;i&#39;</code>.</p>
</li>
<li><p>Each vowel <code>&#39;i&#39;</code> <strong>may not</strong> be followed by another <code>&#39;i&#39;</code>.</p>
</li>
<li><p>Each vowel <code>&#39;o&#39;</code> may only be followed by an <code>&#39;i&#39;</code> or a <code>&#39;u&#39;</code>.</p>
</li>
<li><p>Each vowel <code>&#39;u&#39;</code> may only be followed by an <code>&#39;a&#39;.</code></p>
</li>
</ul>
<p>Since the answer may be too large, return it modulo <code>10^9 + 7.</code></p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>DFS搜索，记忆化剪枝。<br>每次根据上一个字母last来从哈希表里选择下一个可选字母进行遍历，并计算总的可组成数sum。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MOD</span> <span class="operator">=</span> (<span class="type">int</span>) Math.pow(<span class="number">10</span>, <span class="number">9</span>) + <span class="number">7</span>;</span><br><span class="line">    <span class="type">int</span>[][] memo;</span><br><span class="line">    HashMap&lt;Character, Character[]&gt; map;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countVowelPermutation</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">        map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        memo = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>][n+<span class="number">1</span>];</span><br><span class="line">        Character[] vowels = &#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;u&#x27;</span>&#125;, </span><br><span class="line">        a = &#123;<span class="string">&#x27;e&#x27;</span>&#125;, e = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;i&#x27;</span>&#125;, i = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;u&#x27;</span>&#125;, o = &#123;<span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;u&#x27;</span>&#125;, u = &#123;<span class="string">&#x27;a&#x27;</span>&#125;;</span><br><span class="line">        map.put(<span class="string">&#x27;a&#x27;</span>, a);</span><br><span class="line">        map.put(<span class="string">&#x27;e&#x27;</span>, e);</span><br><span class="line">        map.put(<span class="string">&#x27;i&#x27;</span>, i);</span><br><span class="line">        map.put(<span class="string">&#x27;o&#x27;</span>, o);</span><br><span class="line">        map.put(<span class="string">&#x27;u&#x27;</span>, u);</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">char</span> vowel : vowels)&#123;</span><br><span class="line">            ans += count(vowel, n-<span class="number">1</span>);</span><br><span class="line">            ans %= MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">count</span><span class="params">(<span class="type">char</span> last, <span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(memo[last-<span class="string">&#x27;a&#x27;</span>][n] != <span class="number">0</span>) <span class="keyword">return</span> memo[last-<span class="string">&#x27;a&#x27;</span>][n];</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>)&#123;</span><br><span class="line">            memo[last-<span class="string">&#x27;a&#x27;</span>][n] = map.get(last).length;</span><br><span class="line">            <span class="keyword">return</span> memo[last-<span class="string">&#x27;a&#x27;</span>][n];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">char</span> next : map.get(last))&#123;</span><br><span class="line">            sum += count(next, n-<span class="number">1</span>);</span><br><span class="line">            sum %= MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        memo[last-<span class="string">&#x27;a&#x27;</span>][n] = sum;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/07/04/135-Candy/"><img class="fill" src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/banner/LeetCode.png" alt="135. Candy"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-07-05T03:39:35.000Z" title="7/4/2022, 8:39:35 PM">2022-07-04</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-07-04T12:43:48.000Z" title="7/4/2022, 5:43:48 AM">2022-07-04</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/%E5%A4%8D%E4%B9%A0/">复习</a></span><span class="level-item">2 minutes read (About 227 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/07/04/135-Candy/">135. Candy</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>There are <code>n</code> children standing in a line. Each child is assigned a rating value given in the integer array <code>ratings</code>.</p>
<p>You are giving candies to these children subjected to the following requirements:</p>
<ul>
<li>Each child must have at least one candy.</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Children with a higher rating get more candies than their neighbors.</li>
</ul>
<p>Return <em>the minimum number of candies you need to have to distribute the candies to the children</em>.</p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>双向遍历。<br>先从左至右遍历数组，如果上一个数值小于当前数值，则当前糖果等于上一个糖果数+1。<br>然后从右至左遍历数组，同理计算right的数值。<br>然后保存right与left[]里较大的数值，作为需要分配的糖果数加入到res。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">candy</span><span class="params">(<span class="type">int</span>[] ratings)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] left = <span class="keyword">new</span> <span class="title class_">int</span>[ratings.length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; ratings.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span> &amp;&amp; ratings[i] &gt; ratings[i-<span class="number">1</span>])&#123;</span><br><span class="line">                left[i] = left[i-<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                left[i] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> <span class="number">0</span>, res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> ratings.length-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i &lt; ratings.length-<span class="number">1</span> &amp;&amp; ratings[i] &gt; ratings[i+<span class="number">1</span>])&#123;</span><br><span class="line">                right++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                right = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            res += Math.max(left[i], right);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-06-26T21:12:07.000Z" title="6/26/2022, 2:12:07 PM">2022-06-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-06-26T06:12:08.000Z" title="6/25/2022, 11:12:08 PM">2022-06-25</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a></span><span class="level-item">4 minutes read (About 527 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/26/2321-Maximum-Score-Of-Spliced-Array/">2321. Maximum Score Of Spliced Array</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>You are given two <strong>0-indexed</strong> integer arrays <code>nums1</code> and <code>nums2</code>, both of length <code>n</code>.</p>
<p>You can choose two integers <code>left</code> and <code>right</code> where <code>0 &lt;= left &lt;= right &lt; n</code> and <strong>swap</strong> the subarray <code>nums1[left...right]</code> with the subarray <code>nums2[left...right]</code>.</p>
<ul>
<li>For example, if <code>nums1 = [1,2,3,4,5]</code> and <code>nums2 = [11,12,13,14,15]</code> and you choose <code>left = 1</code> and <code>right = 2</code>, <code>nums1</code> becomes <code>[1,&lt;strong&gt;&lt;u&gt;12,13&lt;/u&gt;&lt;/strong&gt;,4,5]</code> and <code>nums2</code> becomes <code>[11,&lt;strong&gt;&lt;u&gt;2,3&lt;/u&gt;&lt;/strong&gt;,14,15]</code>.</li>
</ul>
<p>You may choose to apply the mentioned operation <strong>once</strong> or not do anything.</p>
<p>The <strong>score</strong> of the arrays is the <strong>maximum</strong> of <code>sum(nums1)</code> and <code>sum(nums2)</code>, where <code>sum(arr)</code> is the sum of all the elements in the array <code>arr</code>.</p>
<p>Return <em>the <strong>maximum possible score</strong></em>.</p>
<p>A <strong>subarray</strong> is a contiguous sequence of elements within an array. <code>arr[left...right]</code> denotes the subarray that contains the elements of <code>nums</code> between indices <code>left</code> and <code>right</code> (<strong>inclusive</strong>).</p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>滑动窗口。一开始想用dp解决的。<br>后来发现可以优化到直接记录连续的最大差值即可。<br>以后有提到连续的一定要想到滑动窗口实现。</p>
<p>辅助方法getMinContigouousDiff()用来计算两个数组间连续的最小的差值和。<br>当sum为负数时，窗口向右侧扩展，将新的位置加入sum，并更新最小值min。<br>当扩展后sum大于0时，则放弃之前的所有元素，将sum归零。<br>最后返回最小值min。</p>
<p>计算两个数组的所有数字之和t1和t2。分别计算nums1[]和nums2[]的差min1和nums2[]和nums1[]的差min2。<br>在其中替换连续的部分则为t1-min1，t2-min2。取两者中较大的数字返回即可。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximumsSplicedArray</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums1.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="number">0</span>, t2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n ;i++)&#123; <span class="comment">//计算两个数组未替换前的和</span></span><br><span class="line">            t1 += nums1[i];</span><br><span class="line">            t2 += nums2[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">min1</span> <span class="operator">=</span> getMinContiguousDiff(nums2, nums1);</span><br><span class="line">        <span class="type">int</span> <span class="variable">min2</span> <span class="operator">=</span> getMinContiguousDiff(nums1, nums2);</span><br><span class="line">        <span class="keyword">return</span> Math.max(t1 - min1, t2 - min2);  <span class="comment">//替换连续的部分，两者中取最大值</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getMinContiguousDiff</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2)</span>&#123; <span class="comment">//滑动窗口，求连续元素间的最小差值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>, min = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums1.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(sum &lt;= <span class="number">0</span>)&#123;   <span class="comment">//当sum为负数时，窗口向右侧扩展，将新的位置加入sum</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">diff</span> <span class="operator">=</span> nums2[i] - nums1[i];</span><br><span class="line">                sum += diff;</span><br><span class="line">                <span class="keyword">if</span>(diff &lt; <span class="number">0</span>) min = Math.min(min, sum);  <span class="comment">//更新最小值</span></span><br><span class="line">                <span class="keyword">if</span>(sum &gt; <span class="number">0</span>) sum = <span class="number">0</span>;    <span class="comment">//当sum为正数时，抛弃前面的元素，重新开始计算sum</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> min;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-06-26T10:20:18.000Z" title="6/26/2022, 3:20:18 AM">2022-06-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-06-25T19:20:20.000Z" title="6/25/2022, 12:20:20 PM">2022-06-25</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/%E5%A4%8D%E4%B9%A0/">复习</a></span><span class="level-item">3 minutes read (About 449 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/26/2318-Number-of-Distinct-Roll-Sequences/">2318. Number of Distinct Roll Sequences</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>You are given an integer <code>n</code>. You roll a fair 6-sided dice <code>n</code> times. Determine the total number of <strong>distinct</strong> sequences of rolls possible such that the following conditions are satisfied:</p>
<ol>
<li>The <strong>greatest common divisor</strong> of any <strong>adjacent</strong> values in the sequence is equal to <code>1</code>.</li>
<li>There is <strong>at least</strong> a gap of <code>2</code> rolls between <strong>equal</strong> valued rolls. More formally, if the value of the <code>i&lt;sup&gt;th&lt;/sup&gt;</code> roll is <strong>equal</strong> to the value of the <code>j&lt;sup&gt;th&lt;/sup&gt;</code> roll, then <code>abs(i - j) &gt; 2</code>.</li>
</ol>
<p>Return <em>the</em>* total number** of distinct sequences possible*. Since the answer may be very large, return it <strong>modulo</strong> <code>10&lt;sup&gt;9&lt;/sup&gt;&lt;span&gt; &lt;/span&gt;+ 7</code>.</p>
<p>Two sequences are considered distinct if at least one element is different.</p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>DFS+记忆化搜索剪枝。<br>辅助方法getValidNext计算前两个位置为last1和last2时的所有的下一个有效值，将返回值储存在next[][]数组中。</p>
<h4 id="DFS搜索"><a href="#DFS搜索" class="headerlink" title="DFS搜索"></a>DFS搜索</h4><p>DFS搜索，传入剩余骰子数量n，前两个骰子的值x和y。<br>从next[x][y]中得到所有有效值。并进行递归。<br>将返回结果加和并返回。<br>当n等于0时，只有一个组合，因此返回1。</p>
<h4 id="记忆化搜索"><a href="#记忆化搜索" class="headerlink" title="记忆化搜索"></a>记忆化搜索</h4><p>在搜索时会重复计算很多相同的x，y与n的组合，因此可以采用记忆化搜索进行剪枝。<br>用memo[][][]数组记录x，y与n的状态。如果此前已经计算过其结果，则直接返回memo[x][y][n]。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    List&lt;Integer&gt;[][] next;</span><br><span class="line">    <span class="type">int</span>[][][] memo;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">distinctSequences</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        next = <span class="keyword">new</span> <span class="title class_">ArrayList</span>[<span class="number">7</span>][<span class="number">7</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= <span class="number">6</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= <span class="number">6</span>; j++)&#123;</span><br><span class="line">                next[i][j] = getValidNext(i, j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        memo = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">7</span>][<span class="number">7</span>][<span class="number">10001</span>];</span><br><span class="line">        <span class="keyword">return</span> count(n, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">count</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> x, <span class="type">int</span> y)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(memo[x][y][n] != <span class="number">0</span>) <span class="keyword">return</span> memo[x][y][n];</span><br><span class="line">        List&lt;Integer&gt; validNext = next[x][y];</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> z : validNext)&#123;</span><br><span class="line">            sum += count(n-<span class="number">1</span>, y, z);</span><br><span class="line">            sum %= <span class="number">1000000007</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        memo[x][y][n] = sum;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> List&lt;Integer&gt; <span class="title function_">getValidNext</span><span class="params">(<span class="type">int</span> last1, <span class="type">int</span> last2)</span>&#123;</span><br><span class="line">        List&lt;Integer&gt; arr = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">6</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(last1 == <span class="number">0</span> &amp;&amp; last2 == <span class="number">0</span>) arr.add(i);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(i == last1 || i == last2) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>((last2 &amp; <span class="number">1</span>) == <span class="number">0</span> &amp;&amp; (i &amp; <span class="number">1</span>) == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>((last2 == <span class="number">3</span> || last2 == <span class="number">6</span>) &amp;&amp; (i == <span class="number">3</span> || i == <span class="number">6</span>)) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">else</span> arr.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/06/24/630-Course-Schedule-III/"><img class="fill" src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/banner/LeetCode.png" alt="630. Course Schedule III"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-06-25T06:40:45.000Z" title="6/24/2022, 11:40:45 PM">2022-06-24</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-06-24T15:41:04.000Z" title="6/24/2022, 8:41:04 AM">2022-06-24</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/%E5%A4%8D%E4%B9%A0/">复习</a></span><span class="level-item">2 minutes read (About 335 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/24/630-Course-Schedule-III/">630. Course Schedule III</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>There are <code>n</code> different online courses numbered from <code>1</code> to <code>n</code>. You are given an array <code>courses</code> where <code>courses[i] = [duration&lt;sub&gt;i&lt;/sub&gt;, lastDay&lt;sub&gt;i&lt;/sub&gt;]</code> indicate that the <code>i&lt;sup&gt;th&lt;/sup&gt;</code> course should be taken <strong>continuously</strong> for <code>duration&lt;sub&gt;i&lt;/sub&gt;</code> days and must be finished before or on <code>lastDay&lt;sub&gt;i&lt;/sub&gt;</code>.</p>
<p>You will start on the <code>1&lt;sup&gt;st&lt;/sup&gt;</code> day and you cannot take two or more courses simultaneously.</p>
<p>Return <em>the maximum number of courses that you can take</em>.</p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>贪心算法，优先级队列实现。<br>优先选择截止日期更短的课程。<br>优先级队列pq记录当前已选课程，按持续时间从长到短排列。<br>同时维护当前的日期curDay。</p>
<p>当当前选择的课程截止日期晚于curDay加上当前的持续时间duration时，查看大根堆里最长的课程longestDuration。如果最长的时间大于当前时间，则将其挤出，并将当前课程加入。</p>
<p>如果当前课程截止日期晚于curDay，则直接将其加入队列中，并更新curDay。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">scheduleCourse</span><span class="params">(<span class="type">int</span>[][] courses)</span> &#123;</span><br><span class="line">        Arrays.sort(courses, (a, b) -&gt; a[<span class="number">1</span>] - b[<span class="number">1</span>]);</span><br><span class="line">        PriorityQueue&lt;<span class="type">int</span>[]&gt; pq = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a, b) -&gt; b[<span class="number">0</span>] - a[<span class="number">0</span>]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">curDay</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span>[] course : courses)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">duration</span> <span class="operator">=</span> course[<span class="number">0</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">lastDay</span> <span class="operator">=</span> course[<span class="number">1</span>];</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(curDay + duration &gt; lastDay)&#123;    <span class="comment">//大于截止日期</span></span><br><span class="line">                <span class="keyword">if</span>(pq.isEmpty()) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="type">int</span> <span class="variable">longestDuration</span> <span class="operator">=</span> pq.peek()[<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">if</span>(longestDuration &gt; duration)&#123; <span class="comment">//替换到当前队列中持续日期最长的课程</span></span><br><span class="line">                    curDay -= pq.poll()[<span class="number">0</span>];</span><br><span class="line">                    curDay += duration;</span><br><span class="line">                    pq.offer(course);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;   <span class="comment">//小于截止日期则加入选课</span></span><br><span class="line">                curDay += duration;</span><br><span class="line">                pq.offer(course);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pq.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/06/24/1354-Construct-Target-Array-With-Multiple-Sums/"><img class="fill" src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/banner/LeetCode.png" alt="1354. Construct Target Array With Multiple Sums"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-06-24T18:01:17.000Z" title="6/24/2022, 11:01:17 AM">2022-06-24</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-06-24T03:01:42.000Z" title="6/23/2022, 8:01:42 PM">2022-06-23</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a></span><span class="level-item">4 minutes read (About 547 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/24/1354-Construct-Target-Array-With-Multiple-Sums/">1354. Construct Target Array With Multiple Sums</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>You are given an array <code>target</code> of n integers. From a starting array <code>arr</code> consisting of <code>n</code> 1’s, you may perform the following procedure :</p>
<ul>
<li>let <code>x</code> be the sum of all elements currently in your array.</li>
<li>choose index <code>i</code>, such that <code>0 &lt;= i &lt; n</code> and set the value of <code>arr</code> at index <code>i</code> to <code>x</code>.</li>
<li>You may repeat this procedure as many times as needed.</li>
</ul>
<p>Return <code>true</code> <em>if it is possible to construct the</em> <code>target</code> <em>array from</em> <code>arr</code><em>, otherwise, return</em> <code>false</code>.</p>
</blockquote>
<h3 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution 1"></a>Solution 1</h3><p>递归，每次寻找到数组中最大的数字的下标maxIndex，并对整个数组加和。<br>当数组中出现小于1的数时，不成立，返回false。<br>当数组加和等于数组长度时，返回true。</p>
<p>记录剩余的数字others，如果没有剩余数字，则返回false。<br>将target[maxIndex]减去others，因此每次翻倍，快速逼近。<br>当小于0时，则还原到上一个target[maxIndex]。</p>
<p>递归更改后的数组。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPossible</span><span class="params">(<span class="type">int</span>[] target)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxIndex</span> <span class="operator">=</span> <span class="number">0</span>, sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; target.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(target[i] &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;    <span class="comment">//数组中出现小于1的数，则不成立，返回false</span></span><br><span class="line">            <span class="keyword">if</span>(target[maxIndex] &lt; target[i]) maxIndex = i;</span><br><span class="line">            sum += target[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(sum == target.length) <span class="keyword">return</span> <span class="literal">true</span>;   <span class="comment">//加和等于长度，则数组内全部为1，返回true</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">others</span> <span class="operator">=</span> sum - target[maxIndex];</span><br><span class="line">        <span class="keyword">if</span>(others == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;   <span class="comment">//没有其他值时返回false</span></span><br><span class="line">        target[maxIndex] -= others;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(target[maxIndex] &gt; others)&#123;</span><br><span class="line">            target[maxIndex] -= n * others;</span><br><span class="line">            <span class="keyword">if</span>(target[maxIndex] &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                target[maxIndex] += n * others;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            n*=<span class="number">2</span>;   <span class="comment">//因子每次翻倍，快速逼近</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isPossible(target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution 2"></a>Solution 2</h3><p>优先级队列， 大根堆。<br>每次挤出队列里最大的数字max。</p>
<p>如果max的值为1，则返回true。</p>
<p>计算加和和新的值，并更新sum。<br>如果最大的数字max小于0，或者剩余的sum小于0，则返回false。</p>
<p>当max仍然大于剩下的数字时，继续做减法。采用因数翻倍，快速接近目标值。<br>如果max小于0，则恢复到上一个值，并添加到优先级队列中。</p>
<h3 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPossible</span><span class="params">(<span class="type">int</span>[] target)</span> &#123;</span><br><span class="line">        PriorityQueue&lt;Integer&gt; pq = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;(Collections.reverseOrder());</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> num : target)&#123;</span><br><span class="line">            pq.offer(num);</span><br><span class="line">            sum+=num;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> pq.poll();</span><br><span class="line">            <span class="keyword">if</span>(max == <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">            sum -= max;</span><br><span class="line">            max = max - sum;</span><br><span class="line">            <span class="keyword">if</span>(sum &lt;= <span class="number">0</span> || max &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(max &gt; sum)&#123;</span><br><span class="line">                max -= n * sum;</span><br><span class="line">                <span class="keyword">if</span>(max &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                    max += n * sum;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                n*=<span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            sum += max;</span><br><span class="line">            pq.offer(max);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-06-12T10:40:44.000Z" title="6/12/2022, 3:40:44 AM">2022-06-12</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-06-11T19:51:54.000Z" title="6/11/2022, 12:51:54 PM">2022-06-11</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a></span><span class="level-item">3 minutes read (About 380 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/12/2302-Count-Subarrays-With-Score-Less-Than-K/">2302. Count Subarrays With Score Less Than K</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>The <strong>score</strong> of an array is defined as the <strong>product</strong> of its sum and its length.</p>
<ul>
<li>For example, the score of <code>[1, 2, 3, 4, 5]</code> is <code>(1 + 2 + 3 + 4 + 5) * 5 = 75</code>.</li>
</ul>
<p>Given a positive integer array <code>nums</code> and an integer <code>k</code>, return <em>the <strong>number of non-empty subarrays</strong> of</em> <code>nums</code> <em>whose score is <strong>strictly less</strong> than</em> <code>k</code>.</p>
<p>A <strong>subarray</strong> is a contiguous sequence of elements within an array.</p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>第一次在contest中做出hard题目，而且还是超过100%，庆祝一下！（不过因为前一道题做的太久没提交上去……</p>
<h4 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h4><p>数组内全部为正整数，当选择的子数组的尺寸增加时，其乘积是单调递增的。因此可以采用滑动窗口，在循环时维护窗口内数字的和sum和当前的乘积product。</p>
<p>每次将一个新的右侧元素滑入窗口，更新窗口内的sum值，并计算product值。当当前product大于k时，则将左侧的元素滑出窗口，并更新sum和product值。</p>
<p>调整完窗口尺寸后，由于新的right位置可以和前面的每一个子数组组成一个新的数组，因此将count加上当前的left到right的个数即可。</p>
<p>循环结束后返回count。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">countSubarrays</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">long</span> k)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>, sum = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>, right = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(right &lt; nums.length)&#123;</span><br><span class="line">            sum += nums[right]; <span class="comment">//右侧滑入窗口</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">product</span> <span class="operator">=</span> sum * (right - left + <span class="number">1</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span>(product &gt;= k)&#123;    <span class="comment">//当乘积大于k时，左侧滑出窗口</span></span><br><span class="line">                sum -= nums[left];</span><br><span class="line">                left++;</span><br><span class="line">                product = sum * (right - left + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            count += right - left + <span class="number">1</span>;  <span class="comment">//计算新的right位置可组成的新组合</span></span><br><span class="line">            right++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/06/05/52-N-Queens-II/"><img class="fill" src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/banner/LeetCode.png" alt="52. N-Queens II"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-06-06T02:20:49.000Z" title="6/5/2022, 7:20:49 PM">2022-06-05</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-06-05T14:01:10.000Z" title="6/5/2022, 7:01:10 AM">2022-06-05</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a></span><span class="level-item">a minute read (About 188 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/05/52-N-Queens-II/">52. N-Queens II</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>The <strong>n-queens</strong> puzzle is the problem of placing <code>n</code> queens on an <code>n x n</code> chessboard such that no two queens attack each other.</p>
<p>Given an integer <code>n</code>, return <em>the number of distinct solutions to the <strong>n-queens puzzle</strong></em>.</p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>和昨天的题目<a href="https://xuanhe95.github.io/2022/06/04/51-N-Queens/">51. N-Queens</a>一样。<br>只是不需要转换并记录字符串了，递归结束时直接将res+1即可。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">int</span> target;</span><br><span class="line">    <span class="type">int</span> res;</span><br><span class="line">    <span class="type">int</span>[][] operations;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">totalNQueens</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        target = n;</span><br><span class="line">        res = <span class="number">0</span>;</span><br><span class="line">        operations = <span class="keyword">new</span> <span class="title class_">int</span>[][]&#123;&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,-<span class="number">1</span>&#125;&#125;;</span><br><span class="line">        backtracking(<span class="keyword">new</span> <span class="title class_">int</span>[n][n], <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">backtracking</span><span class="params">(<span class="type">int</span>[][] board, <span class="type">int</span> i, <span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == target)&#123;</span><br><span class="line">            res++;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; target; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(isValid(board, i, j))&#123;</span><br><span class="line">                board[i][j] = <span class="number">1</span>;</span><br><span class="line">                backtracking(board, i+<span class="number">1</span>, n+<span class="number">1</span>);</span><br><span class="line">                board[i][j] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(<span class="type">int</span>[][] board, <span class="type">int</span> i, <span class="type">int</span> j)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span>[] operation : operations)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> i + operation[<span class="number">0</span>], q = j + operation[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">while</span>(p &gt;= <span class="number">0</span> &amp;&amp; p &lt; target &amp;&amp; q &gt;= <span class="number">0</span> &amp;&amp; q &lt; target)&#123;</span><br><span class="line">                <span class="keyword">if</span>(board[p][q] == <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                p += operation[<span class="number">0</span>];</span><br><span class="line">                q += operation[<span class="number">1</span>];                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/06/04/51-N-Queens/"><img class="fill" src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/banner/LeetCode.png" alt="51. N-Queens"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-06-05T01:10:45.000Z" title="6/4/2022, 6:10:45 PM">2022-06-04</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-06-05T11:24:32.000Z" title="6/5/2022, 4:24:32 AM">2022-06-05</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/%E5%A4%8D%E4%B9%A0/">复习</a></span><span class="level-item">5 minutes read (About 749 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/04/51-N-Queens/">51. N-Queens</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>The <strong>n-queens</strong> puzzle is the problem of placing <code>n</code> queens on an <code>n x n</code> chessboard such that no two queens attack each other.</p>
<p>Given an integer <code>n</code>, return <em>all distinct solutions to the <strong>n-queens puzzle</strong></em>. You may return the answer in <strong>any order</strong>.</p>
<p>Each solution contains a distinct board configuration of the n-queens’ placement, where <code>&#39;Q&#39;</code> and <code>&#39;.&#39;</code> both indicate a queen and an empty space, respectively.</p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>话说今天出这道题真的不是搞事情嘛？</p>
<p>八皇后问题，回溯+剪枝。按顺序搜索可以减少情况的重复计算。<br>由于棋盘的大小为n * n，要放n个皇后，因此每一行（列）上<strong>都有且只有一位皇后</strong>。<br>我们可以<strong>依顺序逐行回溯</strong>，对逐行的每一列进行回溯。<br>由于每一行的可选位置都减少1，因此时间复杂度为O(N!)。</p>
<h4 id="回溯"><a href="#回溯" class="headerlink" title="回溯"></a>回溯</h4><p>通过一个char数组board[][]记录棋子状态。将board[][]初始化为’.’。<br>遍历这一行的所有列，如果该位置有效，则board[i][j]改为’Q’，将这个点设置为有棋子，并递归下一行。<br>回溯，将board[i][j]重新设置为’.’。</p>
<p>当递归次数达到n时，将char[]数组转换为字符串加入答案。</p>
<h4 id="辅助方法-isValid"><a href="#辅助方法-isValid" class="headerlink" title="辅助方法 isValid"></a>辅助方法 isValid</h4><p>检测该位置是否有效。即该位置的路径上是否已经有棋子，或该位置已经有棋子。<br>由于我们的回溯方法是逐行确定棋子位置，因此不需要查看全部八个方向，而是查看<strong>之前已经遍历过的行</strong>即可。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    List&lt;List&lt;String&gt;&gt; ret;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    <span class="type">int</span>[][] operations;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; <span class="title function_">solveNQueens</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        ret = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        size = n;</span><br><span class="line">        operations = <span class="keyword">new</span> <span class="title class_">int</span>[][]&#123;&#123;-<span class="number">1</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line">        <span class="type">char</span>[][] board = <span class="keyword">new</span> <span class="title class_">char</span>[n][n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">char</span>[] s : board)&#123;</span><br><span class="line">            Arrays.fill(s,<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        backtracking(board,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">backtracking</span><span class="params">(<span class="type">char</span>[][] board, <span class="type">int</span> n, <span class="type">int</span> i)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == size)&#123;</span><br><span class="line">            List&lt;String&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">char</span>[] s : board) ans.add(<span class="keyword">new</span> <span class="title class_">String</span>(s));</span><br><span class="line">            ret.add(ans);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; size; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(isValid(board, i, j))&#123;</span><br><span class="line">                board[i][j] = <span class="string">&#x27;Q&#x27;</span>;</span><br><span class="line">                backtracking(board, n+<span class="number">1</span>, i+<span class="number">1</span>);</span><br><span class="line">                board[i][j] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(<span class="type">char</span>[][] board, <span class="type">int</span> i, <span class="type">int</span> j)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span>[] operation : operations)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> i + operation[<span class="number">0</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">q</span> <span class="operator">=</span> j + operation[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">while</span>(p &gt;= <span class="number">0</span> &amp;&amp; p &lt; size &amp;&amp; q &gt;= <span class="number">0</span> &amp;&amp; q &lt; size)&#123;</span><br><span class="line">                <span class="keyword">if</span>(board[p][q] == <span class="string">&#x27;Q&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                p += operation[<span class="number">0</span>];</span><br><span class="line">                q += operation[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution 2"></a>Solution 2</h3><p>简单回溯。<br>在回溯时搜索二维位置，因此增加了时间复杂度，正常是过不了的。<br>通过<strong>按顺序</strong>进行搜索（只搜索当前行之后的位置）进行剪枝。</p>
<h3 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    List&lt;List&lt;String&gt;&gt; ret;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    <span class="type">int</span>[][] operations;</span><br><span class="line">    HashSet&lt;String&gt; set;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; <span class="title function_">solveNQueens</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        ret = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        size = n;</span><br><span class="line">        operations = <span class="keyword">new</span> <span class="title class_">int</span>[][]&#123;&#123;<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,-<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">0</span>,-<span class="number">1</span>&#125;&#125;;</span><br><span class="line">        backtracking(<span class="keyword">new</span> <span class="title class_">int</span>[n][n],<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">backtracking</span><span class="params">(<span class="type">int</span>[][] border, <span class="type">int</span> n, <span class="type">int</span> start)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == size)&#123;</span><br><span class="line">            <span class="comment">//print(border);</span></span><br><span class="line">            List&lt;String&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++)&#123;</span><br><span class="line">                <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; size; j++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(border[i][j] == <span class="number">1</span>)&#123;</span><br><span class="line">                        sb.append(<span class="string">&quot;Q&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                        sb.append(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                ans.add(sb.toString());</span><br><span class="line">            &#125;</span><br><span class="line">            ret.add(ans);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt; size; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; size; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(border[i][j] == <span class="number">0</span>)&#123;</span><br><span class="line">                    border[i][j] = <span class="number">1</span>;</span><br><span class="line">                    List&lt;<span class="type">int</span>[]&gt; temp = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span>[] operation : operations)&#123;</span><br><span class="line">                        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> i, q = j;</span><br><span class="line">                        <span class="keyword">while</span>(p &gt;= <span class="number">0</span> &amp;&amp; p &lt; size &amp;&amp; q &gt;= <span class="number">0</span> &amp;&amp; q &lt; size)&#123;</span><br><span class="line">                            <span class="keyword">if</span>(border[p][q] == <span class="number">0</span>)&#123;</span><br><span class="line">                                border[p][q] = <span class="number">2</span>;</span><br><span class="line">                                temp.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;p,q&#125;);</span><br><span class="line">                            &#125;</span><br><span class="line">                            p += operation[<span class="number">0</span>];</span><br><span class="line">                            q += operation[<span class="number">1</span>];</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    backtracking(border, n+<span class="number">1</span>, i+<span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span>[] t : temp)&#123;</span><br><span class="line">                        border[t[<span class="number">0</span>]][t[<span class="number">1</span>]] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    border[i][j] = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/05/25/354-Russian-Doll-Envelopes/"><img class="fill" src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/banner/LeetCode.png" alt="354. Russian Doll Envelopes"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-05-25T12:54:31.000Z" title="5/25/2022, 5:54:31 AM">2022-05-25</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-09-11T20:07:18.000Z" title="9/11/2022, 1:07:18 PM">2022-09-11</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/%E5%A4%8D%E4%B9%A0/">复习</a></span><span class="level-item">7 minutes read (About 979 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/05/25/354-Russian-Doll-Envelopes/">354. Russian Doll Envelopes</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>You are given a 2D array of integers <code>envelopes</code> where <code>envelopes[i] = [w&lt;sub&gt;i&lt;/sub&gt;, h&lt;sub&gt;i&lt;/sub&gt;]</code> represents the width and the height of an envelope.</p>
<p>One envelope can fit into another if and only if both the width and height of one envelope are greater than the other envelope’s width and height.</p>
<p>Return <em>the maximum number of envelopes you can Russian doll (i.e., put one inside the other)</em>.</p>
<p><strong>Note:</strong> You cannot rotate an envelope.</p>
</blockquote>
<h3 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution 1"></a>Solution 1</h3><h4 id="最长递增子数列"><a href="#最长递增子数列" class="headerlink" title="最长递增子数列"></a>最长递增子数列</h4><p>这道题是<a href="https://xuanhe95.github.io/2022/05/01/300-Longest-Increasing-Subsequence/">LIS问题</a>（Longest Increasing Subsequence） 的升级版。<br>后一个数组中的两个元素应该同时严格大于前一个数组中的两个元素。<br>因此我们需要维护一个宽度和高度同时严格单调递增的数列。</p>
<h4 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h4><p>我们可以对数组以宽度进行比较排序。当二者的宽度相等时，<strong>以高度的倒序排序</strong>。<br>（采用倒序排序是为了下面处理时排除不严格大于上一个数组的情况。）</p>
<h4 id="递增数列"><a href="#递增数列" class="headerlink" title="递增数列"></a>递增数列</h4><p>我们可以维护一个递增动态数组arr，记录高度组成的单调递增数列。（LIS）<br>首先将数组中的第一个元素的高度加入动态数组。<br>然后遍历数组envelopes[]：</p>
<ul>
<li>如果当前数组的高度height大于单调递增数列的最大值：<ul>
<li>则当前的数组的<strong>宽度</strong>和<strong>高度</strong>均严格大于数组中最后一个高度对应的数组。</li>
<li>数组是优先以宽度的顺序排列，相等时以高度的倒序排列。由于<strong>相同宽度时高度大的在前</strong>，因此当当前高度大于之前的最大高度，则宽度也一定大于之前的最大宽度。</li>
</ul>
</li>
<li>如果小于或者等于单调递增数列的最大值：<ul>
<li>单调数列中高度的增长越平缓，我们在后面找到更多严格大于height的可能性就越大，因此可以用贪心思想，更新单调数列中的第一个大于当前高度的值。</li>
<li>由于单调递增数列是<strong>有序</strong>的，因此可以采用<strong>二分搜索</strong>来寻找第一个大于当前高度的值的下标，并将其更新为当前的height。</li>
</ul>
</li>
</ul>
<p>排序的时间复杂度为O(nlogn)，遍历数组的时间复杂度为O(n)，二分搜索的时间复杂度为O(logn)。<br>总的时间复杂度为O(nlogn)。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxEnvelopes</span><span class="params">(<span class="type">int</span>[][] envelopes)</span> &#123;</span><br><span class="line">        Arrays.sort(envelopes, (a,b) -&gt; a[<span class="number">0</span>] != b[<span class="number">0</span>] ? a[<span class="number">0</span>] - b[<span class="number">0</span>] : b[<span class="number">1</span>] - a[<span class="number">1</span>]);</span><br><span class="line">        </span><br><span class="line">        List&lt;Integer&gt; arr = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        arr.add(envelopes[<span class="number">0</span>][<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; envelopes.length; i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> envelopes[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(height &gt; arr.get(arr.size()-<span class="number">1</span>))&#123;</span><br><span class="line">                arr.add(height);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> Collections.binarySearch(arr, height);</span><br><span class="line">                <span class="keyword">if</span>(index &lt; <span class="number">0</span>) index = -index-<span class="number">1</span>;</span><br><span class="line">                arr.set(index, height);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution 2"></a>Solution 2</h3><p>注意这个方法在LeetCode中会超时，仅仅是记录一下思路，也可以采用动态规划的方法。<br>记忆化搜索剪枝。<br>记忆化搜索每个envelope。</p>
<p>memorazation()方法，返回当前的envelope中可以包含的最大数量。<br>当数组memo[i]不等于0时，返回memo[i]。<br>否则初始化最大值max为1。<br>遍历数组中的所有元素，如果宽度于长度都大于envelopes[i]，则向下递归搜索该元素。<br>比较并更新max和递归结果的返回值+1。<br>最后将当前位置memo[i]设置为包含的最大数量max。</p>
<p>遍历所有元素时间复杂度O(n)。<br>记忆化搜索元素的子项时间复杂度O(n)。<br>时间复杂度为O(n2)。</p>
<h3 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] dolls;</span><br><span class="line">    <span class="type">int</span>[] memo;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxEnvelopes</span><span class="params">(<span class="type">int</span>[][] envelopes)</span> &#123;</span><br><span class="line">        dolls = envelopes;</span><br><span class="line">        memo = <span class="keyword">new</span> <span class="title class_">int</span>[dolls.length];</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; dolls.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(memo[i] != <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            memorazation(i);</span><br><span class="line">            res = Math.max(res, memo[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">memorazation</span><span class="params">(<span class="type">int</span> i)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(memo[i] != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> memo[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; dolls.length; k++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(dolls[k][<span class="number">0</span>] &lt; dolls[i][<span class="number">0</span>] &amp;&amp; dolls[k][<span class="number">1</span>] &lt; dolls[i][<span class="number">1</span>])&#123;</span><br><span class="line">                max = Math.max(max, memorazation(k) + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> memo[i] = max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/05/24/32-Longest-Valid-Parentheses/"><img class="fill" src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/banner/LeetCode.png" alt="32. Longest Valid Parentheses"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-05-25T05:02:08.000Z" title="5/24/2022, 10:02:08 PM">2022-05-24</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-05-25T13:49:20.000Z" title="5/25/2022, 6:49:20 AM">2022-05-25</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/%E5%A4%8D%E4%B9%A0/">复习</a></span><span class="level-item">4 minutes read (About 611 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/05/24/32-Longest-Valid-Parentheses/">32. Longest Valid Parentheses</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>Given a string containing just the characters <code>&#39;(&#39;</code> and <code>&#39;)&#39;</code>, find the length of the longest valid (well-formed) parentheses substring.</p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>如果有右括号先出现于左括号，则其永远无法配对。<br>而如果是左括号先出现，则其有可能可以和之后的右括号进行配对。</p>
<p>因此我们可以将左括号的位置入栈，等待配对。<br>并记录上一个不能配对的右括号的位置。以此来确定当前位置的有效括号长度。</p>
<p>首先将上一个不能组队的右括号lastRightParenthese初始化为-1。<br>初始化一个最大有效长度best。</p>
<p>然后遍历字符串：</p>
<ul>
<li>当遇到左括号时：<ul>
<li>将当前下标i压入栈。（记录等待配对的左括号）</li>
</ul>
</li>
<li>遇到右括号时：<ul>
<li>如果栈为空，则更新上一个不能组队的右括号的位置为当前下标i。（此时出现的右括号一定无法配对）</li>
<li>如果栈不为空，则挤出上一个左括号的下标，与右括号配对。<ul>
<li>挤出上一个左括号后，如果栈为空。则将当前的有效括号总长度为i - lastRightParenthese。（当前的右括号和上一个不能配对的右括号的差）</li>
<li>否则当前的有效括号总长度为i - stack.peek()。（当前的右括号和上一个不配对的左括号的差。）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestValidParentheses</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        Deque&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">best</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">lastRightParenthese</span> <span class="operator">=</span> -<span class="number">1</span>;   <span class="comment">//上一个不能配对的右括号位置，初始化为-1</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(i) == <span class="string">&#x27;(&#x27;</span>)&#123; <span class="comment">//如果当前位置是左括号，则将下标入栈</span></span><br><span class="line">                stack.push(i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;   <span class="comment">//如果当前位置是右括号...</span></span><br><span class="line">                <span class="keyword">if</span>(stack.isEmpty())&#123;    <span class="comment">//如果没有可以配对的左括号，则更新不能配对的右括号的位置</span></span><br><span class="line">                    lastRightParenthese = i;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    stack.pop();    <span class="comment">//如果有可以配对的右括号，则从栈中挤出</span></span><br><span class="line">                    <span class="keyword">if</span>(stack.isEmpty())&#123;    <span class="comment">//挤出后如果没有剩余的左括号了，则当前有效括号长度为当前位置减去上一个无法配对的右括号的位置</span></span><br><span class="line">                        best = Math.max(best, i - lastRightParenthese);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;   <span class="comment">//如果挤出后栈内仍有剩余的左括号存在，则当前有效括号长度为当前位置减去栈顶的左括号的位置</span></span><br><span class="line">                        best = Math.max(best, i - stack.peek());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> best;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-05-22T23:27:32.000Z" title="5/22/2022, 4:27:32 PM">2022-05-22</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-05-22T08:41:52.000Z" title="5/22/2022, 1:41:52 AM">2022-05-22</time></span><span class="level-item"><a class="link-muted" href="/categories/LeetCode/">LeetCode</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/">Hard</a><span> / </span><a class="link-muted" href="/categories/LeetCode/Hard/%E5%A4%8D%E4%B9%A0/">复习</a></span><span class="level-item">6 minutes read (About 974 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/05/22/2281-Sum-of-Total-Strength-of-Wizards/">2281. Sum of Total Strength of Wizards</a></p><div class="content"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>As the ruler of a kingdom, you have an army of wizards at your command.</p>
<p>You are given a <strong>0-indexed</strong> integer array <code>strength</code>, where <code>strength[i]</code> denotes the strength of the <code>i&lt;sup&gt;th&lt;/sup&gt;</code> wizard. For a <strong>contiguous</strong> group of wizards (i.e. the wizards’ strengths form a <strong>subarray</strong> of <code>strength</code>), the <strong>total strength</strong> is defined as the <strong>product</strong> of the following two values:</p>
<ul>
<li>The strength of the <strong>weakest</strong> wizard in the group.</li>
<li>The <strong>total</strong> of all the individual strengths of the wizards in the group.</li>
</ul>
<p>Return <em>the <strong>sum</strong> of the total strengths of <strong>all</strong> contiguous groups of wizards</em>. Since the answer may be very large, return it <strong>modulo</strong> <code>10&lt;sup&gt;9&lt;/sup&gt;&lt;span&gt; &lt;/span&gt;+ 7</code>.</p>
<p>A <strong>subarray</strong> is a contiguous <strong>non-empty</strong> sequence of elements within an array.</p>
</blockquote>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/sum-of-total-strength-of-wizards/discuss/2062017/C%2B%2B-prefix-%2B-monotonic-stack-O(N)-solution-with-thought-process">参考连接</a></p>
<p>根据题意，我们需要的结果是<strong>所有子数列</strong>乘以<strong>该子数列中最小值</strong>之和。</p>
<p>数组strength[]中的每一个元素，<strong>都充当一定范围内的子数列的最小值</strong>。因此我们需要**确定每个元素充当最小值的范围(left, right)**。然后计算这个元素可以组成的子数列的和与这个元素的乘积。</p>
<p>我们的问题<strong>相当于确定下一个更小元素</strong>，而单调栈专门处理这一类问题——“下一个更大&#x2F;更小元素”<br><a target="_blank" rel="noopener" href="https://leetcode.com/problems/next-greater-element-i/">496. Next Greater Element I</a></p>
<p>通过单调栈，我们可以确定<strong>最小值为strength[i]的子数列</strong>的范围(left, right)，并将其保存在两个数组left[]与right[]中。</p>
<p>最后通过前缀和的计算，来确定(left, right)范围内的<strong>子数列之和</strong>。</p>
<h4 id="单调栈"><a href="#单调栈" class="headerlink" title="单调栈"></a>单调栈</h4><p>新建两个数组left[]， right[]保存以strength[i]为最小值的范围。</p>
<p>维护两个单调栈，保证下列关系：<br><code>strength[left] &lt; strength[i]</code><br><code>strength[right] &lt;= strength[i]</code></p>
<p>其中，left取小于号，而right可以等于是为了取值不重复。</p>
<p>注意，<strong>单调栈保存的是下标</strong>，这样使用起来更加灵活。</p>
<h4 id="前缀和"><a href="#前缀和" class="headerlink" title="前缀和"></a>前缀和</h4><p>为了得到范围（left, right）内的<strong>所有子数列之和</strong>。我们可以观察left, i, right之间的关系。</p>
<blockquote>
<p>…<code>left-1</code>, <code>left</code>, <strong><code>left + 1</code>, <code>left + 2</code>, … <code>i-1</code>, <code>i</code>, <code>i+1</code>, … <code>right-1</code></strong>, <code>right</code>, <code>right+1</code>…</p>
</blockquote>
<ul>
<li><strong>开始于 <code>left+1</code>的子数列:</strong><br>sum(<code>left+1</code>, … <code>i</code>) &#x3D; <code>prefix[i + 1] - prefix[left + 1]</code><br>sum(<code>left+1</code>, … <code>i+1</code>) &#x3D; <code>prefix[i + 2] - prefix[left + 1]</code><br>…<br>sum(<code>left+1</code>, … <code>right-1</code>) &#x3D; <code>prefix[right] - prefix[left + 1]</code></li>
<li><strong>开始于<code>left+2的子数列</code>:</strong><br>sum(<code>left+2</code>, … <code>i</code>) &#x3D; <code>prefix[i + 1] - prefix[left + 2]</code><br>sum(<code>left+2</code>, … <code>i+1</code>) &#x3D; <code>prefix[i + 2] - prefix[left + 2]</code><br>…<br>sum(<code>left+2</code>, … <code>right-1</code>) &#x3D; <code>prefix[right] - prefix[left + 2]</code><br>…</li>
<li><strong>开始于<code>i</code>的子数列:</strong><br>sum(<code>i</code>, … <code>i</code>) &#x3D; <code>prefix[i + 1] - prefix[i]</code><br>sum(<code>i</code>, … <code>i+1</code>) &#x3D; <code>prefix[i + 2] - prefix[i]</code><br>…<br>sum(<code>i</code>, … <code>right-1</code>) &#x3D; <code>prefix[right] - prefix[i]</code></li>
</ul>
<p>合并这些式子，我们可以得到：</p>
<ul>
<li><strong><em>正数</em> 部分</strong>:<br><code>(prefix[i + 1] + prefix[i + 2] + ... + prefix[right]) * (i - left)</code></li>
<li><strong><em>负数</em> 部分</strong>:<br><code>(prefix[left + 1] + prefix[left + 2] + ... + prefix[i]) * (right - i)</code></li>
</ul>
<p>最后我们可以提前计算前缀和的前缀和来优化计算步骤，注意计算时需要将各个部分模除以保证不超过范围。<br>正数部分模除后需要加上MOD以保证其减去负数部分的结果大于0。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">totalStrength</span><span class="params">(<span class="type">int</span>[] strength)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">MOD</span> <span class="operator">=</span> <span class="number">1_000_000_007</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> strength.length;</span><br><span class="line">        </span><br><span class="line">        Deque&lt;Integer&gt; mono = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span>[] left = <span class="keyword">new</span> <span class="title class_">int</span>[n], right = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; strength.length; i++)&#123;   <span class="comment">//单调栈，记录比当前元素strength[i]小的第一个左侧位置strength[left]</span></span><br><span class="line">            <span class="keyword">while</span>(!mono.isEmpty() &amp;&amp; strength[mono.peek()] &gt;= strength[i])&#123;</span><br><span class="line">                mono.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            left[i] = mono.isEmpty() ? -<span class="number">1</span> : mono.peek();</span><br><span class="line">            mono.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">        mono.clear();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n-<span class="number">1</span>; i &gt;=<span class="number">0</span>; i--)&#123;   <span class="comment">//单调栈，记录比当前元素strength[i]小的第一个右侧位置strength[right]</span></span><br><span class="line">            <span class="keyword">while</span>(!mono.isEmpty() &amp;&amp; strength[mono.peek()] &gt; strength[i])&#123;</span><br><span class="line">                mono.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            right[i] = mono.isEmpty() ? n : mono.peek();</span><br><span class="line">            mono.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">long</span>[] prefix = <span class="keyword">new</span> <span class="title class_">long</span>[n+<span class="number">1</span>], prefix_sum = <span class="keyword">new</span> <span class="title class_">long</span>[n+<span class="number">2</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= strength.length; i++)&#123;  <span class="comment">//计算前缀和</span></span><br><span class="line">            prefix[i] = (prefix[i-<span class="number">1</span>] + strength[i-<span class="number">1</span>]) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= strength.length+<span class="number">1</span>; i++)&#123;    <span class="comment">//计算前缀和的前缀和</span></span><br><span class="line">            prefix_sum[i] = (prefix_sum[i-<span class="number">1</span>] + prefix[i-<span class="number">1</span>]) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">long</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            res += ((prefix_sum[right[i] + <span class="number">1</span>] - prefix_sum[i + <span class="number">1</span>]) * (i - left[i]) % MOD + MOD -    <span class="comment">//这里加MOD是为了保证前项大于后项，防止出现负数</span></span><br><span class="line">                    (prefix_sum[i + <span class="number">1</span>] - prefix_sum[left[i] + <span class="number">1</span>]) * (right[i] - i) % MOD ) * strength[i];</span><br><span class="line">            res %= MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/categories/LeetCode/Hard/page/0/">Previous</a></div><div class="pagination-next"><a href="/categories/LeetCode/Hard/page/2/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/categories/LeetCode/Hard/">1</a></li><li><a class="pagination-link" href="/categories/LeetCode/Hard/page/2/">2</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://www.gravatar.com/avatar/1df9d9603ec9aabe96b8544e70466213?s=128" alt="XANDER"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">XANDER</p><p class="is-size-6 is-block">Architecture / Computer Science</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>UCLA, Los Angeles, CA.</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">293</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">23</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">79</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://twitter.com/xuanhe95" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/xuanhe95"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/xuanhe95"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Linkedin" href="https://www.linkedin.com/in/xuanhe-zhang/"><i class="fab fa-linkedin-in"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Zhihu" href="https://www.zhihu.com/people/fired"><i class="fab fa-zhihu"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-03T04:21:17.000Z">2023-04-02</time></p><p class="title"><a href="/2023/04/02/Augment-Reality/">Augment Reality</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-02T23:28:43.000Z">2023-04-02</time></p><p class="title"><a href="/2023/04/02/Unreal-World-Building/">Unreal World Building</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-01T00:43:27.000Z">2023-03-31</time></p><p class="title"><a href="/2023/03/31/UCLA-Fall-Augmented-Reality-Behavior/">UCLA Fall: Augmented Reality Behavior</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-03-30T22:46:23.000Z">2023-03-30</time></p><p class="title"><a href="/2023/03/30/Digital-Fabrication/">Digital Fabrication</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-03-30T09:04:24.000Z">2023-03-30</time></p><p class="title"><a href="/2023/03/30/Artifical-Intelligence-in-Mapping/">Artifical Intelligence in Mapping</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">284</span></span></a></li></ul></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="http://pm2k.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Pm2k</span></span><span class="level-right"><span class="level-item tag">pm2k.com</span></span></a></li><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://raw.githubusercontent.com/xuanhe95/xuanhe95.github.io/gh-pages/images/icons/x.png" alt="XANDER&#039;s Studio" height="28"></a><p class="is-size-7"><span>&copy; 2023 Xuanhe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "opt-out",
        theme: "block",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/night.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>